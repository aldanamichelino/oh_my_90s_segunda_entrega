<section style="background-color: #eee;">
  <div class="text-center container py-5">
    <h4 class="m-5"><strong>¡Elegí tus snacks favoritos de la década de 1990!</strong></h4>
    <div class="row">
        <% if(products.length > 0) { %>
        <%  products.forEach(product => { %>
              <div class="col-lg-4 col-md-12 mb-4">
                  <div class="card border border-4">
                    <div class="bg-image hover-zoom ripple ripple-surface ripple-surface-light"
                      data-mdb-ripple-color="light">
                      <img src="<%= `/products/${product.image}` %>"
                        style="max-height: 300px;" />
                    </div>
                    <div class="card-body">
                      <a href="" class="text-reset">
                        <h5 class="card-title mb-3" style="color: #bb24e6"><%=product.name%></h5>
                      </a>
                      <a href="" class="text-reset">
                        <p><%=product.description%></p>
                      </a>
                      <div class="d-flex justify-content-around align-items-center">
                        <h6 class="m-0 rounded-pill p-2 w-25 text-light" style="background: #bb24e6;"><%= `$${product.price}` %></h6>
                        <form method="post" action="<%=`/api/carrito/${product._id}`%>" class="w-50 add-product-to-cart-form">
                          <input type="number" name="quantity" id="quantity" class="input-text qty" value="1" min="1" max="<%= product.stock %>" style="width: 50px;">
                          <button data-item="<%= product._id %>" type="submit" class="p-1 text-light w-25 rounded add-product-to-cart" style="background: #bb24e6; border: none;"><i class="fas fa-shopping-cart text-light"></i></button>
                        </form>
                      </div>
                    </div>
                  </div>
              </div>
          <% }); %>
      <% } else { %>
          <h2>No tenemos productos todavía</h2>
      <% } %>
    </div>
  </div>
</section>

<script>
  const addProductForm = document.getElementsByClassName('add-product-to-cart-form');

  for(let form of addProductForm){
    form.addEventListener('submit', (event) => {
      Swal.fire({
      icon: 'success',
      title: 'Agregaste un producto a tu carrito'
      });
    });
  };
</script>
